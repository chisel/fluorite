CommentParser=function(){this._registry={},this.register=function(e,i,t){this._registry[e]={type:i,action:t}},this.parse=function(e){Node||(Node={}),Node.COMMENT_NODE||(Node.COMMENT_NODE=8);for(var i,t,n=[],s=0;s<e.childNodes.length;s++){var r=e.childNodes[s];if(r.nodeType===Node.COMMENT_NODE){var o,l=r.data.trim().match(/([\/a-z0-9-_]+)(:\s*(.+,?)+)?/i);if(!l)continue;l[3]&&(o=l[3].replace(/\s+/g,"").split(","));var a=!1;"/"===(l=l[1].trim()).substr(0,1)&&(a=!0,l=l.slice(1));var c=this._registry[l];if(!c)continue;if("single"===c.type)c.action(r.nextElementSibling,o);else if("block"===c.type){if(a&&t===l){c.action(n,i),t=null,i=null,n=[];continue}t=l,i=o}}else t&&n.push(r)}}};