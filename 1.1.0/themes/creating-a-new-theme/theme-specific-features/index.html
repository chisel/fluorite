<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Make documentation at ease!</title>
    <link rel="shortcut icon" href="../../../../assets/theme/images/favicon.ico">
    <style media="screen">
      html {
        --color-accent: #8670b2;
        --color-accent-secondary: #bc6cc1;
      }
    </style>
    <link rel="stylesheet" href="../../../../assets/theme/styles.css">
    <script src="../../../../assets/theme/js/comment-parser.js" charset="utf-8"></script>
    <script src="../../../../assets/theme/js/script.js" charset="utf-8"></script>
  </head>
  <body>
    <header>
      <div class="brand">
        <img class="logo" src="../../../../assets/theme/images/logo.svg">
        <a class="title" href="../../../../1.1.0">Fluorite</a>
          <div class="versions-dropdown" onclick="toggleVersionsDropdown(this, event)">
            <span>1.1.0</span>
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
              	 width="451.847px" height="451.847px" viewBox="0 0 451.847 451.847" style="enable-background:new 0 0 451.847 451.847;"
              	 xml:space="preserve">
              	<path d="M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751
              		c12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0
              		c12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z"/>
              </svg>            <div class="dropdown-container" onclick="stopClickBubbling(event)">
              <ul>
                  <a href="../../../../1.4.0/themes/creating-a-new-theme/theme-specific-features"><li>1.4.0</li></a>
                  <a href="../../../../1.3.8/themes/creating-a-new-theme/theme-specific-features"><li>1.3.8</li></a>
                  <a href="../../../../1.3.3/themes/creating-a-new-theme/theme-specific-features"><li>1.3.3</li></a>
                  <a href="../../../../1.2.0/themes/creating-a-new-theme/theme-specific-features"><li>1.2.0</li></a>
                  <a href="."><li>1.1.0</li></a>
              </ul>
            </div>
          </div>
      </div>
        <div class="progress-bar-container">
          <div class="progress-bar"></div>
        </div>
        <div class="sub">
          <a  href="../../../../1.1.0"class="subtitle">Make documentation at ease!</a>
        </div>
    </header>
    <main>
      <div class="mobile-options">
        <div class="mobile-option" onclick="toggleMobileMenu(this, 'navigationList')">
          Menu
        </div>
          <div class="mobile-option" onclick="toggleMobileMenu(this, 'versionsList')">
            Version
          </div>
      </div>
      <nav>
          <div id="versionsList" class="nav-container">
              <a class="level-0" href="../../../../1.4.0/themes/creating-a-new-theme/theme-specific-features">1.4.0</a>
              <a class="level-0" href="../../../../1.3.8/themes/creating-a-new-theme/theme-specific-features">1.3.8</a>
              <a class="level-0" href="../../../../1.3.3/themes/creating-a-new-theme/theme-specific-features">1.3.3</a>
              <a class="level-0" href="../../../../1.2.0/themes/creating-a-new-theme/theme-specific-features">1.2.0</a>
              <a class="level-0 selected" href=".">1.1.0</a>
          </div>
        <div id="navigationList" class="nav-container active custom-scroller sub-header-offset">
            <a
            href="../../../../1.1.0"
            class="level-0">
              Introduction
            </a>
            <a
            href="../../../quick-start/"
            class="   level-0">
              Quick Start
            </a>
            <a
            href="../../../project-structure/"
            class="   level-0">
              Project Structure
            </a>
            <a
            href="../../../configuration/"
            class="   level-0">
              Configuration
            </a>
            <a
            href="../../../contents/"
            class="   level-0">
              Contents
            </a>
              <hr class="level-0">
            <a
            href="../../../contents/markdown/"
            class=" sub  level-1">
              Markdown
            </a>
            <a
            href="../../../contents/markdown-example/"
            class=" sub  level-1">
              Markdown Example
            </a>
            <a
            href="../../../contents/rest-api/"
            class=" sub  level-1">
              REST API
            </a>
            <a
            href="../../../contents/rest-api-example/"
            class=" sub  level-1">
              REST API Example
            </a>
            <a
            href="../../../contents/assets/"
            class=" sub last-sub level-1">
              Assets
            </a>
            <a
            href="../../"
            class="   level-0">
              Themes
            </a>
              <hr class="level-0">
            <a
            href="../../pre-installed/"
            class=" sub  level-1">
              Pre-Installed
            </a>
              <hr class="level-1">
            <a
            href="../../../themes/pre-installed/onyx/"
            class=" sub last-sub level-2">
              Onyx
            </a>
            <a
            href="../../installation/"
            class=" sub  level-1">
              Installation
            </a>
            <a
            href="../"
            class=" sub  level-1">
              Creating a New Theme
            </a>
              <hr class="level-1">
            <a
            href="../../../themes/creating-a-new-theme/setting-up-the-theme/"
            class=" sub  level-2">
              Setting Up the Theme
            </a>
            <a
            href="../../../themes/creating-a-new-theme/theme-configuration/"
            class=" sub  level-2">
              Theme Configuration
            </a>
            <a
            href="../../../themes/creating-a-new-theme/theme-assets/"
            class=" sub  level-2">
              Theme Assets
            </a>
            <a
            href="../../../themes/creating-a-new-theme/theme-flavors/"
            class=" sub  level-2">
              Theme Flavors
            </a>
            <a
            href="../../../themes/creating-a-new-theme/templating/"
            class=" sub  level-2">
              Templating
            </a>
            <a
            href="../../../themes/creating-a-new-theme/helpers-and-partials/"
            class=" sub  level-2">
              Helpers and Partials
            </a>
            <a
            href="./"
            class="selected sub  level-2">
              Theme-specific Features
            </a>
            <a
            href="../../../themes/creating-a-new-theme/installation/"
            class=" sub  level-2">
              Installation
            </a>
            <a
            href="../../../themes/creating-a-new-theme/using-the-theme/"
            class=" sub last-sub level-2">
              Using the Theme
            </a>
            <a
            href="../../../api-reference/"
            class="   level-0">
              API Reference
            </a>
              <hr class="level-0">
            <a
            href="../../../api-reference/cli/"
            class=" sub  level-1">
              CLI
            </a>
            <a
            href="../../../api-reference/nodejs-api/"
            class=" sub  level-1">
              Node.js API
            </a>
            <a
            href="../../../api-reference/template-api/"
            class=" sub  level-1">
              Template API
            </a>
        </div>
      </nav>
      <div class="article-container">
        <article>
                <h1><a id="theme-specific-features">Theme-specific Features</a></h1>
                <p>When you scaffold a new theme using the CLI, a utility library is created at <code>/js/comment-parser.js</code>. This library allows us to read the HTML comment nodes inside the rendered content and change the elements based on the comment syntax.</p>
<h2 id="markdown-comments">Markdown Comments</h2>
<p>The following syntax is valid inside a Markdown file:</p>
<pre><code class="language-markdown"><span class="token comment">&lt;!-- singleElementCommand: arguments --></span>
Markdown paragraph
</code></pre>
<pre><code class="language-markdown"><span class="token comment">&lt;!-- blockCommand: arguments --></span>
Any number of markdown content
<span class="token url">[<span class="token content">Link</span>](<span class="token url">#</span>)</span>
<span class="token comment">&lt;!-- /blockCommand --></span>
</code></pre>
<h2 id="comment-parsing-api">Comment Parsing API</h2>
<p>The comment parser library exposes the following API:</p>
<ul>
<li>register(command, type, handler): Registers a command with a handler.<ul>
<li><code>command</code>: The command.</li>
<li><code>type</code>: Either <code>single</code> or <code>block</code>.</li>
<li><code>handler</code>: A callback to handle the elements. This callback will be called with two arguments: a single element (if type is <code>single</code>) or an array of elements (if type is <code>block</code>) and the provided arguments.</li>
</ul>
</li>
<li>parse(container): Starts parsing all the elements inside the container, looking for comment nodes and calling registered commands&#39; handlers.</li>
</ul>
<h2 id="defining-comments">Defining Comments</h2>
<p>We want to register a block command named <code>responsive</code> which takes three arguments: <code>mobile</code>, <code>tablet</code>, and <code>desktop</code>. When used, all the content inside this block will be only shown on the specified views. Let&#39;s load the comment parser library in our <code>index.hbs</code> (before the theme&#39;s script) and update <code>/js/script.js</code>:</p>
<p><strong>index.hbs:</strong></p>
<pre><code class="language-html">{{! Comment Parser Utility }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{rootPrefix}}/assets/theme/js/comment-parser.js<span class="token punctuation">"</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre>
<p><strong>/js/script.js:</strong></p>
<pre><code class="language-js"><span class="token comment">// On content loaded:</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>

  <span class="token comment">// Instantiate CommentParser</span>
  <span class="token keyword">const</span> comment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CommentParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Register the 'responsive' block command</span>
  comment<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'responsive'</span><span class="token punctuation">,</span> <span class="token string">'block'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">nodes<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>

    <span class="token comment">// Iterate through each node</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">const</span> node <span class="token keyword">of</span> nodes <span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span> node<span class="token punctuation">.</span>classList <span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>

      <span class="token comment">// Get the computed CSS `display` or set to `block` as default</span>
      <span class="token keyword">const</span> display <span class="token operator">=</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">.</span>display <span class="token operator">||</span> <span class="token string">'block'</span><span class="token punctuation">;</span>

      <span class="token comment">// Apply the Bootstrap responsive classes</span>
      node<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">d-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>args<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'mobile'</span><span class="token punctuation">)</span> <span class="token operator">?</span> display <span class="token operator">:</span> <span class="token string">'none'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      node<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">d-sm-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>args<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'mobile'</span><span class="token punctuation">)</span> <span class="token operator">?</span> display <span class="token operator">:</span> <span class="token string">'none'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      node<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">d-md-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>args<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'tablet'</span><span class="token punctuation">)</span> <span class="token operator">?</span> display <span class="token operator">:</span> <span class="token string">'none'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      node<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">d-lg-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>args<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'desktop'</span><span class="token punctuation">)</span> <span class="token operator">?</span> display <span class="token operator">:</span> <span class="token string">'none'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      node<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">d-xl-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>args<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'desktop'</span><span class="token punctuation">)</span> <span class="token operator">?</span> display <span class="token operator">:</span> <span class="token string">'none'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Parse the content container element</span>
  comment<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.container .row .content'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="result">Result</h2>
<p>At this point our theme takes responsive markdown through HTML comments. The following is a usage example:</p>
<pre><code class="language-markdown"><span class="token comment">&lt;!-- responsive: tablet, desktop --></span>
This paragraph will show up on tablet and desktop only.
<span class="token comment">&lt;!-- /responsive --></span>
<span class="token comment">&lt;!-- responsive: mobile --></span>
This paragraph will only show up on mobile.
<span class="token comment">&lt;!-- /responsive --></span>
</code></pre>
<p>The theme is finally ready. We&#39;ll install it in the <a href="../../../../1.1.0/themes/creating-a-new-theme/installation">next section</a>.</p>

        </article>
        <footer>
          <span>Generated by <a href="https://fluorite.js.org" target="_blank">Fluorite</a></span>
          <span class="last-modified">Last modified: 5/4/2023</span>
        </footer>
      </div>
    </main>
  </body>
</html>
