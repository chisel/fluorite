class CommentParser{_registry={};register(e,s,t){this._registry[e]={type:s,action:t}}processSelector(e,s=!0,t=!1){for(const o of document.querySelectorAll(e))this.processNodes(o.childNodes,s,t)}processNodes(e,s=!0,t=!1){Node||(Node={}),Node.COMMENT_NODE||(Node.COMMENT_NODE=8);let o,i,r=[];for(const c of e)if(c.nodeType===Node.COMMENT_NODE){let e=c.data.trim().match(/([\/a-z0-9-_]+)(:\s*(.+,?)+)?/i),l=[],n=!1;if(!e){i&&!s&&r.push(c);continue}e[3]&&(l=t?e[3]:e[3].replace(/\s+/g,"").split(",")),e=e[1].trim(),"/"===e.substr(0,1)&&(n=!0,e=e.slice(1));const N=this._registry[e];if(!N){i&&!s&&r.push(c);continue}if("single"===N.type)N.action(c.nextElementSibling,l,c);else if("block"===N.type){if(n&&i===e){N.action(r,o,c),i=null,o=null,r=[];continue}i=e,o=l}}else i&&r.push(c)}}